% !TeX TS-program = lualatex


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% Find the TeX engine you're running -- works with pdflatex, xelatex and lualatex
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,12pt]{article}

\usepackage{ifluatex,ifxetex}

%%
%% Find out which engine is running
\newcount\bookmajorversion
\newcount\bookminorversion

\ifluatex
\bookmajorversion=\luatexversion
\bookminorversion=\luatexversion
\divide \bookmajorversion by 100
\multiply \bookmajorversion by 100
\advance \bookminorversion by -\bookmajorversion
\divide \bookmajorversion by 100
\def\booktexbanner{Lua\LaTeX\ \the\bookmajorversion.\the\bookminorversion.\luatexrevision\ (with \directlua{tex.print(_VERSION)})}
\else
\ifxetex
\bookmajorversion=\XeTeXversion
\def\booktexbanner{Xe\LaTeX\ \the\bookmajorversion\XeTeXrevision}
\else
\bookmajorversion=\pdftexversion
\bookminorversion=\pdftexversion
\divide \bookmajorversion by 100
\multiply \bookmajorversion by 100
\advance \bookminorversion by -\bookmajorversion
\divide \bookmajorversion by 100
\def\booktexbanner{pdf\LaTeX\ \the\bookmajorversion.\the\bookminorversion.\pdftexrevision}
\fi
\fi

\begin{document}
This file is rendered using \booktexbanner.
\end{document}